## Як читати звіт та групувати перевірки

Як читати звіт тестування та групувати тест перевірки в групи та тест кейси. Як опис відображається в звіті.

<details>
  <summary><u>Структура модуля</u></summary>

```
report
   ├── Join.js
   ├── Join.test.js    
   └── package.json

```

</details>

Створіть приведену вище структуру файлів для проведення тестування рутини.

### Об'єкт тестування

<details>
    <summary><u>Код файла <code>Join.js</code></u></summary>

```js    
module.exports.join = function( a, b )
{
  return String( a ) + String( b );
}

```

</details>

Внесіть приведений вище код в файл `Join.js`.

Функція `join` виконує конкатенацію двох рядків. Вона експортується для використання.

### Тестовий файл

Тест сюіт `Join.test.js` має суфікс `.test` для того, щоб утиліта для тестування могла знайти його.

<details>
    <summary><u>Код файла <code>Join.test.js</code></u></summary>

```js    
let _ = require( 'wTesting' );
let Join = require( './Join.js' );

//

function routine1( test )
{

  test.open( 'string' );

    test.case = 'trivial';
    test.identical( Join.join( 'a', 'b' ), 'ab' );

    test.case = 'empty';
    test.identical( Join.join( '', '' ), '' );

  test.close( 'string' );
  test.open( 'number' );

    test.case = 'trivial';
    test.identical( Join.join( 1, 3 ), '13' );

    test.case = 'zeroes';
    test.identical( Join.join( 0, 0 ), '00' );

  test.close( 'number' );
  test.open( 'mixed' );

    test.identical( Join.join( 'a', 1 ), 'a1' );

  test.close( 'mixed' );
 

}

//

var Self =
{
  name : 'Join',
  tests :
  {
    routine1,
  }
}

//

Self = wTestSuite( Self );
if( typeof module !== 'undefined' && !module.parent )
wTester.test( Self.name );

```

</details>

Внесіть приведений вище код в файл `Join.test.js`.

Тестова рутина `routine1` має 2-ві групи перевірок `string` та `number`, а також тест кейс `mixed` з однією перевіркою. Їх було так згруповано по типу аргументів, що передаються функції `Join.join`, яка тестується. Група `string` містить 2-ва тест кейси `trivial` та `empty`, в кожному із яких по одній перевірці. Група `number` має тест кейси `trivial` та `zeroes` із одною перевіркою в кожному. 

В приведеному коді підключено дві залежності. Перша - утиліта `Testing` для здійснення тесту. Друга - файл `Join.js` з рутиною для тестування.

<details>
    <summary><u>Код файла <code>package.json</code></u></summary>

```json    
{
  "dependencies": {
    "wTesting": ""
  }
}

```

</details>

Внесіть приведений код з залежностями для тестування. Їх завантаження здійснюється командою `npm install` в директорії модуля.

### Як читати звіт про тестування

Між структурою тест файла і виводом результатів тестування є пряма залежність.

Запустіть тестування в файлі `Join.test.js`, виконавши команду 

```
tst Join.test.js verbosity:5
```

Опцією `verbosity` встановлено кількість виводу інформації. Детальніше про опцію можете дізнатись в туторіалі про [контроль рівня вербальності](Verbosity.md). 

<details>
    <summary><u>Відповідність між звітом в консолі і вмістом файла <code>Join.test.js</code></u></summary>

![report.png](../../images/report.png)

</details>

На рисунку зліва приведений вивід консолі отриманий після виконання команди. Він ділиться на чотири основні секції та містить декілька додаткових сервісних повідомлень.

Перша секція - опції тестування. Призначена для виводу поточних параметрів тестування. В четвертому рядку знизу секції можете знайти опцію `verbosity` зі значенням `5`, це значення було встановлено в опції команди.

Друга секція - вивід звіту тестування по окремим тест рутинам і тест кейсам. При тестуванні скопом така секція є у кожного тест сюіту. В даній секції приводиться інформація щодо статусу проходження тестування окремими тест перевірками в рутинах тест сюіта. 

Кількість тест рутин, тест кейсів та тест перевірок визначається кодом тест сюіта. На рисунку справа приведений код файла `Join.test.js`. В звіт потрапили результати виконання п'яти тест кейсів в рутині `routine1`. З указаних тест кейсів, дві групи вкладено в секції `string` i `number`. Звіт при використанні вкладення виглядає:

```
Test check ( Join / routine1 / string > trivial # 1) ... ok

```

Цей запис свідчить, що тест перевірка пройдена, вона має номер 1. В дужках позначено шлях, за яким знаходиться перевірка: тест сюіт `Join` / рутина `routine1` / група тест кейсів `string` > тест кейс `trivial`. Відповідно, для позначення вкладення тест кейсів використовується знак `>`. 

На основі виконання тест кейсів та перевірок утиліта робить висновок щодо проходження тестування в рутині: `Passed test routine ( Join / routine1 ) in 0,173s`. 

Третя секція - підсумковий звіт по одному тест сюіту. При виконанні тестування скопом виводиться після завершення тестування окремих тест сюітів. В секції приводиться загальний підсумок - кількість пройдених перевірок, тест кейсів, тест рутин на основі чого робиться висновок про проходження тест сюіта.

В даному тест сюіті пройдено 5 тест перевірок, покладених в 5 тест кейсів, пройдено одну тест рутину. На основі цього висновок по тест сюіту `Join` - пройдений. 

Четверта секція - загальний звіт по тестуванню. Звіт також включає кількість пройдених тест перевірок, тест кейсів, тест рутин та тест сюітів. При тестуванні скопом відповідна інформація сумується.

Директорія налічує лише один тест сюіт, тому загальний підсумок повторює попередню секцію. 

### Звіт з помилкою

Звіт може містити провалені перевірки, які вказують на помилки коду, або тесту.

<details>
    <summary><u>Код файла <code>Join.test.js</code> з помилкою в тесті</u></summary>

```js    
let _ = require( 'wTesting' );
let Join = require( './Join.js' );

//

function routine1( test )
{

  test.open( 'string' );

    test.case = 'trivial';
    test.identical( Join.join( 'a', 'b' ), 'ab' );

    test.case = 'empty';
    test.identical( Join.join( '', '' ), '' );

  test.close( 'string' );
  test.open( 'number' );

    test.case = 'trivial';
    test.identical( Join.join( 1, 3 ), '13' );

    test.case = 'zeroes';
    test.identical( Join.join( 0, 0 ), '00' );

  test.close( 'number' );
  test.open( 'mixed' );
    
    test.will = 'str_num';
    test.identical( Join.join( 'a', 1 ), 'a2' );

  test.close( 'mixed' );
 

}

//

var Self =
{
  name : 'Join',
  tests :
  {
    routine1,
  }
}

//

Self = wTestSuite( Self );
if( typeof module !== 'undefined' && !module.parent )
wTester.test( Self.name );

```

</details>

Замініть вміст файла `Join.test.js` на приведений вище. 

В файлі змінено тест кейс `mixed` - до нього додано рядок `test.will = 'str_num'`, котрий позначає назву перевірки. В перевірку було внесено помилку в очікуваному значенні - рутині `Join.join` передано значення `a` i `1`, а очікується `a2`.

Для отримання звіту тестування введіть команду `tst Join.test.js v:5`.

<details>
    <summary><u>Звіт тестування при помилці в тест перевірці</u></summary>

![report2.png](../../images/report2.png)

</details>

Утиліта вивела розширену інформацію про помилку. 

В виводі спочатку указано значення тест перевірки, що провалилась:
- отримане значення `got`;
- очікуване значення `expected`;
- різниця між отриманим і очікуваним значенням - `difference`.

В наступній секції приводиться назва файла з помилкою, рядок в якому була провалена перевірка, а також, частина коду з проваленою тест перевіркою.
Підсумок по тест перевірці `Test check ( Join / routine1 / mixed < str_num # 5 ) ... failed`, включає  назву `str_num`, указану в коді тест файлу. Назва перевірки та її номер відділені знаком `<`.

Використовуючи інформацію про помилку розробник може . 

### Підсумок

- Тест кейси можна групувати;
- В виводі звіту по тест перевіркам указується повний шлях до неї