# Як писати тест рутину

Основні правила написання тест рутин

Структурно тест сюіт складається з тест рутин. Тест рутини призначені для тестування окремих аспектів тест об'єкта, або, навіть, повного тестування тест об'єкта. Від правивильної побудови тест рутини залежатиме зручність підтримки та розширення тестів.

### Загальні рекомендації щодо написання тест рутин

- Для окремої рутини ( чи іншої функціональності ) тест об'єкта створюється принаймні одна тест рутина з назвою аналогічній до рутини тест об'єкту.
- Якщо функціональність складна, можна розділити її між декількома тест рутинами з назвами, що мають спільний початок.
- Тест рутина може містити тест кейси та окремі тест перевірки. Використанню тест кейсів віддається перевага.
- Для кожного тестового випадку створюється власний тест кейс або тест перевірка.
- Якщо використовуються окремі тест перевірки, їх потрібно описати так же як і тест кейс, з допомогою функціоналу утиліти.
- Тест кейси можуть об'єднуватись у тест групи, що формуються за специфічним критерієм. Наприклад, за кількістю вхідних аргументів, за типом вхідних аргументів, за очікуваним результатом, тощо.
- Опис тест групи створюється за критерієм формування групи.
- Для створення тест групи в неї потрібно помістити більше ніж один тест кейс.
- В описі тест кейсів і тест перевірок указується те, чим даний тест кейс чи перевірка відрізняються від інших.
- Іноді, додаткові змінні та колбеки використовуються в більш ніж одному тест кейсі. В такому разі, загальною рекомендацією є дублювання змінних і колбеків для кожного тест кейсу. У випадку, якщо дублювання призведе до невипраданого збільшення тест рутини, можна винести окремі змінні або колбеки на початок або в кінець рутини.

### Візуальне розділення елементів тест рутини

- Тест рутини відділяються одна від одної використанням коментарю `//`, поміщеного між двома порожніми рядками.

```js
function test1()
{
  // some code
}

//

function test2()
```

- Тест кейси включають опис тест кейсу, змінні для здійснення тестового випадку, тестовий випадок та тест перевірки. Всі елементи йдуть послідовно, кожен з нового рядка, при необхідності, окремі елементи можуть відділятись порожнім рядком. При цьому не має бути конфліктів з іншими частинами форматування рутини.

```js
test.case = 'ins is number`;
var equalizer = ( el, arrEl ) => el === arrEl[ 0 ];
var got = _.arrayRemove( [ 1, 2, 3 ], 3, equalizer );
var expected = [ [ 1, 2 ] ];
test.identical( got, expected );
```

- Тест кейси відділяються один від одного порожнім рядком або рядком з коментарем `/* */`, котрий поміщений між двох порожніх рядків.

```js
test.case = 'ins is number`;
var got = _.arrayRemove( [ 1, 2, 3 ], 3 );
var expected = [ [ 1, 2 ] ];
test.identical( got, expected );

test.case = 'ins is string';
var got = _.arrayRemove( [ 1, 2, 3 ], '3' );
var expected = [ [ 1, 2, 3 ] ];
test.identical( got, expected );

/* */

test.case = 'ins is array';
```

- Тест групи відділяються одна від іншою використанням коментаря `/* - */`, відділеного двома порожніми рядками.

```js
test.close( 'one argument' );

/* - */

test.open( 'two arguments' );
```

- Окремі тест перевірки відділяються як і тест кейси.

### Послідовність заповнення покриття тест об'єкта

Для якісного тестового покриття необхідно, щоб тест рутина покрила максимально можливу кількість тестових випадків роботи тест об'єкта як при позитивному, так і при негативному тестуванні. Відповідно, тест рутина ділиться на дві окремі секції - тестування штатної роботи і тестування некоректного вводу.

- Розробнику на етапі створення тест рутини потрібно вирішити за якою схемою вона буде будуватись - виключно із тест кейсів, чи з використанням тест груп. Одночасно з цим, будь-яка послідовність тест кейсів може утворити тест групу.
- Першою секцією є тестування штатної роботи тест об'єкту.
- Якщо використовуються лише тест кейси, то зміна тестових випадків може мати послідовність від найпростіших до найсладніших, іншим варіантом є створення тест кейсів за послідовністю опису тест об'єкта.
