# Тест перевірка

Тест перевірка - очікування розробника стосовно поведінки об'єкту, що тестується виражене якоюсь умовою. Це найнижча структурна одиниця тестування.

Більшість перевірок приймаю два аргументи і порівнюючи їх видають позитивний або негативний результат тестування:

- отримані дані
- очікувані дані

[Тест кейс](TestCase.md) складається із одної або декількох перевірок. Достатньо лише однієї перевірки із результатом '"failed" щоб увесь об'єкт, що тестується вважався таким, що не пройшов тестування.

### Приклад тест кейса з перевірками

![test.check](../../images/test.check.png)

На рисунку зображено тест кейс `join strings` з трьома тест перевірками. Кожна з перевірок порівнює два значення. Перше отримане з допомогою методу `join`, а друге, очікуване значення, задане розробником.

## Позитивне тестування

Тестування коректності роботи об'єкта тестування за нормальних умов, при відсутності помилок в вхідних даних та нормальному стані.

Для позитивного тестування можуть застосовуватись такі перевірки:
- `is`;
- `isNot`;
- `isNotError`;
- `identical`;
- `notIdentical`;
- `equivalent`;
- `notEquivalent`;
- `contains`;
- `gt`;
- `ge`;
- `lt`;
- `le`;
- `mustNotThrowError`;
- `shouldMessageOnlyOnce`.

## Негативне тестування

Тестування коректності обробки об'єктом тестування помилкових даних чи помилкового стану.

Для негативного тестування застосовуються такі перевірки:
- `shouldThrowErrorSync`;
- `shouldThrowErrorAsync`;
- `shouldThrowError`.

### Перелік перевірок

##### Тест перевірка `is`

Очікує єдиний аргумент типу `bool-like`.

Перевірка проходиться, якщо аргумент `true-like`, тобто, `true` або числове значення відмінне від нуля.

Перевірка провалюється, якщо аргумент `false-like`, тобто, `false` чи числове значення `0`.

Повертає `true`, якщо перевірку пройдено та `false`, якщо перевірка провалилася.

```
var got = true;
test.is( got );
```

Перевірку `test.is` буде пройдено так, як в момент перевірки змінна `got` має значення `true`.

##### Тест перевірка `isNot`

Очікує єдиний аргумент типу `bool-like`.

Перевірка проходиться, якщо аргумент `false-like`, тобто, `false` або числове значення рівне нулю.

Перевірка провалюється, якщо аргумент `true-like`, тобто, `true` або числове значення відмінне від нуля.

```
var got = false;
test.isNot( got );
```

Перевірку `test.isNot` буде пройдено так, як в момент перевірки змінна `got` має значення `false`.

##### Тест перевірка `isNotError`

Очікує єдиний аргумент типу `error-like`.

Перевірка проходиться, якщо аргумент `noError-like`, тобто, має числове або рядкове значення.

Перевірка провалюється, якщо аргумент `error-like`, тобто, аргумент повертає помилку.

```
var got = 1;
test.isNotError( got );
```

Перевірку `test.isNotError` буде пройдено так, як в момент перевірки змінна `got` має значення числове значення.

##### Тест перевірка `identical`

Крім повної форми, має скорочену - `il`.

Очікує два аргументи одного типу - числового, рядкового або булевого.

Перевірка проходиться, якщо передані аргументи повністю співпадають.

Перевірка провалюється, якщо значення аргументів відрізняються. Відхилення числових значень не враховується.

```
var got = 'ok';
var expected = 'ok';
test.identical( got,expected );
```

Перевірку `test.identical` буде пройдено так, як в момент перевірки обидва значення ідентичні.

##### Тест перевірка `notIdentical`

Крім повної форми, має скорочену - `ni`.

Очікує два аргументи числового, рядкового або булевого типу.

Перевірка проходиться, якщо передані аргументи не співпадають.

Перевірка провалюється, якщо аргументи повністю ідентичні. Відхилення числових значень не враховується.

```
var got = '1';
var expected = '1.00001';
test.identical( got,expected );
```

Перевірку `test.notIdentical` буде пройдено так, як в перше значення відрізняється від другого на `0.00001`. 

##### Тест перевірка `equivalent`

Крім повної форми, має скорочену - `et`.

Очікує два аргументи числового, рядкового або булевого типу.

Перевірка проходиться, якщо передані аргументи співпадають. В тому числі, відбувається співставлення булевих і числових значень: "0" - "false" i "1" - "true". При перевірці числових значень враховується похибка.

Перевірка провалюється, якщо значення аргументів не співпадають. Відхилення числових значень враховується.

```
var got = '1';
var expected = '1.00001';
test.equivalent( got,expected );
```

Перевірку `test.equivalent` буде провалено так, як значення похибки за замовчуванням 1е-7, а значення відрізняється на 1е-5. 

```
function routine( test )
{
var got = '1';
var expected = '1.00001';
test.equivalent( got,expected );
}
routine.accuracy = 1e-4
```
Перевірку `test.equivalent` буде пройдено так, як значення похибки в тест рутині `routine` встановлено в 1е-4. 

##### Тест перевірка `notEquivalent`

Крім повної форми, має скорочену - `ne`.

Очікує два аргументи числового, рядкового або булевого типу.

Перевірка проходиться, якщо передані аргументи не співпадають. В тому числі, відбувається співставлення булевих і числових значень: "0" - "false" i "1" - "true". При перевірці числових значень враховується похибка.

Перевірка провалюється, якщо значення аргументів співпадають. Відхилення числових значень враховується.

```
var got = '1';
var expected = '1.00001';
test.ne( got,expected );
```

Перевірку `test.ne` буде пройдено так, як значення похибки за замовчуванням 1е-7 і очікуване значення відрізняється від отриманого на 1е-5. 

##### Тест перевірка `contains`

Очікує два аргументи числового, рядкового, булевого типу або асоціативні масиви.

Перевірка проходиться, якщо передані аргументи співпадають, або якщо перший асоціативний масив містить пари ключ-значення другого асоціативного масиву. При перевірці числових значень враховується похибка не враховується.

Перевірка провалюється, якщо значення аргументів не співпадають, або якщо перший асоціативний масив не містить елементів другого масиву. Відхилення числових значень не враховується.

```
var got = true;
var expected = true;
test.contains( got,expected );
```

Перевірку `test.contains` буде пройдено так, як значення `got` і очікуване значення співпадають. Порівняння можливе перед однотипними змінними.

```
var got = { a:1, b:2, c:3 };
var expected = {a:4};
test.contains( got,expected );
```

Перевірку `test.contains` буде провалено так, як в асоціативному масиві `got` немає елемента `a:4` указаного в очікуваному значенні `expected`.

##### Тест перевірка `gt`

Очікує два числових, рядкових або булевих значення.

Перевірка проходиться, якщо значення першого аргумента більше другого. Враховується перетворення булевих значень в числові: "0" - "false" i "1" - "true".

Перевірка провалюється, якщо значення першого аргумента менше або рівне другому.

```
var got = 1;
var expected = false;
test.gt( got,expected )
```

Перевірку `test.gt` буде пройдено так, як змінна `got` має значення "1", що переводиться в булеве "true", "true" більше від "false".

##### Тест перевірка `ge`

Очікує два числових, рядкових або булевих значення.

Перевірка проходиться, якщо значення першого аргумента більше або рівне другому. Враховується перетворення булевих значень в числові: "0" - "false" i "1" - "true". 

Перевірка провалюється, якщо значення першого аргумента менше від другого.

```
var got = 10;
var expected = 10;
test.ge( got,expected )
```

Перевірку `test.ge` буде пройдено так, як значення обох аргументів рівні.

##### Тест перевірка `lt`

Очікує два числових, рядкових або булевих значення.

Перевірка проходиться, якщо значення першого аргумента менше другого. Враховується перетворення булевих значень в числові: "0" - "false" i "1" - "true". 

Перевірка провалюється, якщо значення першого аргумента менше або рівне другому.

```
var got = 2;
var expected = 3;
test.lt( got,expected )
```

Перевірку `test.lt` буде пройдено так, як значення першого аргументу менше другого.

##### Тест перевірка `le`

Очікує два числових, рядкових або булевих значення.

Перевірка проходиться, якщо значення першого аргумента менше або рівне другому. Враховується перетворення булевих значень в числові: "0" - "false" i "1" - "true". 

Перевірка провалюється, якщо значення першого аргумента більше від другого.

```
var got = 10;
var expected = 10;
test.le( got,expected )
```

Перевірку `test.le` буде пройдено так, як значення обох аргументів рівні.

##### Тест перевірка `shouldThrowErrorSync`

Очікує аргумент у вигляді функції.

Перевірка проходиться, якщо функція викидає помилку в синхронному режимі, тобто, при зверненні до неї. 

Перевірка провалюється, якщо функція не викидує помилку при зверненні.

```
test.shouldThrowError( function()
    {
      throw _.err( 'err1' );
    });
```

Перевірку `test.shouldThrowErrorSync` буде пройдено так, як указана функція повертає помилку при її виконанні. 

##### Тест перевірка `shouldThrowErrorAsync`

Очікує аргумент у вигляді функції.

Перевірка проходиться, якщо функція викидає помилку в асинхронному режимі, тобто, в будь-який момент після звернення до неї. 

Перевірка провалюється, якщо функція не викидує помилку за час виконання.

```
test.shouldThrowErrorAsync( function()
    {
      return _.timeOut( 250,function()
      {
        throw _.err( 'test' );
      });
    });
```

Перевірку `test.shouldThrowErrorAsync` буде пройдено так, як указана функція повертає помилку через 250мс після її виклику. В тіло метода `timeOut` вкладений промайс (promise) з функцією яка викидує помилку.

##### Тест перевірка `shouldThrowError`

Очікує аргумент у вигляді функції.

Перевірка проходиться, якщо функція викидає помилку в синхронному або асинхронному режимі.

Перевірка провалюється, якщо функція не викидує помилку.

```
test.shouldThrowError( function()
    {
      throw _.err( 'err1' );
    });
test.shouldThrowError( function()
    {
      return _.timeOut( 250,function()
      {
        throw _.err( 'test' );
      });
    });
```

Обидві перевірки `test.shouldThrowError` будуть пройдені. Перша виконується в синхронному режимі, їй передається невірний аргумент, що викликає помилку. В другій перевірці, як указано в промайсі функція повертає помилку через 250мс.

##### Тест перевірка `mustNotThrowError`

Очікує аргумент у вигляді функції.

Перевірка проходиться, якщо функція не викидає помилку в синхронному або асинхронному режимі.

Перевірка провалюється, якщо функція викидує помилку.

```
test.shouldThrowError( function()
    {
      return 'value';
    });
test.shouldThrowError( function()
    {
      return _.timeOut( 250,function()
      {
        return 'value`;
      });
    });
```

Обидві перевірки `test.mustNotThrowError` будуть пройдені. Перша виконується в синхронному режимі, вона повертає рядкове значення. В другій перевірці, як указано в промайсі функція повертає рядкове значення `value` через 250мс.

##### Тест перевірка `shouldMessageOnlyOnce`

Очікує аргумент у вигляді функції.

Перевірка проходиться, якщо функція повертає повідомлення в синхронному або асинхронному режимі.

Перевірка провалюється, якщо функція видає декілька повідомлень при виконанні.

```
test.shouldMessageOnlyOnce( function()
    {
      return 'msg'
    });
```

Перевірка `test.shouldMessageOnlyOnce` буде пройдена. Передана в неї функція повертає одне повідомлення в синхронному режимі.

